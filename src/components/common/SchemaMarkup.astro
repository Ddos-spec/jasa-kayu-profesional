---
const { 
  type = 'WebSite', 
  name, 
  url, 
  description, 
  logo, 
  author, 
  datePublished, 
  dateModified,
  breadcrumbs = [],
  reviews = []
} = Astro.props;

// Generate schema based on type
let schema = {};

switch(type) {
  case 'WebSite':
    schema = {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": name,
      "url": url,
      "description": description,
      "potentialAction": {
        "@type": "SearchAction",
        "target": `${url}/search/?q={search_term_string}`,
        "query-input": "required name=search_term_string"
      }
    };
    break;
    
  case 'Organization':
    schema = {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": name,
      "url": url,
      "description": description,
      "logo": logo,
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+6281283135295",
        "contactType": "customer service",
        "areaServed": "ID",
        "availableLanguage": "id"
      },
      "sameAs": [
        "https://www.facebook.com/jasakayuprofesional",
        "https://www.instagram.com/jasakayuprofesional",
        "https://wa.me/6281234567890"
      ]
    };
    break;
    
  case 'LocalBusiness':
    schema = {
      "@context": "https://schema.org",
      "@type": "HomeAndConstructionBusiness", // More specific type for construction business
      "name": "Serasi Parket - Jasa Kayu Profesional",
      "legalName": "Serasi Parket",
      "image": logo,
      "@id": url,
      "url": url,
      "email": "info@jasakayuprofesional.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Area Jabodetabek",
        "addressLocality": "Jakarta",
        "addressRegion": "DKI",
        "postalCode": "10000",
        "addressCountry": "ID"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": -6.2088,
        "longitude": 106.8456
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
        "opens": "08:00",
        "closes": "17:00"
      },
      "telephone": "+6281283135295",
      "priceRange": "$$$",
      "description": "Jasa pengerjaan kayu premium untuk lantai, dinding, tangga, plafon, furniture built-in, serta pergola outdoor di Jabodetabek. Spesialis lantai kayu jati, dinding kayu, tangga kayu artistik, plafon kayu, furniture custom, pergola & decking outdoor.",
      "areaServed": ["Jakarta", "Bogor", "Depok", "Tangerang", "Bekasi", "Karawang", "Sukabumi", "Bandung", "Cirebon"],
      "paymentAccepted": ["Cash", "Bank Transfer", "QRIS"],
      "founder": {
        "@type": "Person",
        "name": "Serasi Parket Team",
        "jobTitle": "Professional Wood Craftsmen"
      },
      "foundingDate": "1990",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "1850"
      },
      "makesOffer": [
        {
          "@type": "Offer",
          "itemOffered": [
            {
              "@type": "Service",
              "name": "Jasa Pasang Lantai Kayu"
            },
            {
              "@type": "Service",
              "name": "Jasa Pasang Dinding Kayu"
            },
            {
              "@type": "Service",
              "name": "Jasa Buat Tangga Kayu"
            },
            {
              "@type": "Service",
              "name": "Jasa Pasang Plafon Kayu"
            },
            {
              "@type": "Service",
              "name": "Furniture Kayu Custom"
            },
            {
              "@type": "Service",
              "name": "Pergola & Decking Outdoor"
            }
          ]
        }
      ]
    };
    break;
    
  case 'Article':
    schema = {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": name,
      "description": description,
      "author": author ? {
        "@type": "Person",
        "name": author
      } : {
        "@type": "Organization",
        "name": name
      },
      "publisher": {
        "@type": "Organization",
        "name": name,
        "logo": {
          "@type": "ImageObject",
          "url": logo
        }
      },
      "datePublished": datePublished,
      "dateModified": dateModified
    };
    break;
    
  case 'BreadcrumbList':
    schema = {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": breadcrumbs.map((breadcrumb, index) => ({
        "@type": "ListItem",
        "position": index + 1,
        "name": breadcrumb.name,
        "item": breadcrumb.url
      }))
    };
    break;
    
  case 'Product':
    schema = {
      "@context": "https://schema.org",
      "@type": "Service",
      "serviceType": name,
      "provider": {
        "@type": "HomeAndConstructionBusiness",
        "name": "Serasi Parket",
        "areaServed": "Jabodetabek"
      },
      "areaServed": "Jabodetabek",
      "offers": {
        "@type": "Offer",
        "availability": "https://schema.org/InStock",
        "price": "Variable",
        "priceCurrency": "IDR"
      },
      "description": description
    };
    break;
    
  default:
    schema = {
      "@context": "https://schema.org",
      "@type": type,
      "name": name,
      "url": url,
      "description": description
    };
}

const schemaString = JSON.stringify(schema);
---

<script type="application/ld+json" set:html={schemaString} />