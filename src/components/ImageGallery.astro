---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface ImageItem {
  src: ImageMetadata;
  alt: string;
  caption?: string;
}

export interface ImageGalleryProps {
  images: ImageItem[];
  columns?: number;
  spacing?: 'sm' | 'md' | 'lg';
}

const { 
  images, 
  columns = 3, 
  spacing = 'md' 
} = Astro.props;

const spacingClasses = {
  sm: 'gap-2',
  md: 'gap-4',
  lg: 'gap-6'
};

const columnClasses = {
  1: 'grid-cols-1',
  2: 'grid-cols-2',
  3: 'grid-cols-3',
  4: 'grid-cols-4'
};
---

<div class={`grid ${columnClasses[columns]} ${spacingClasses[spacing]} my-8`}>
  {images.map((image) => (
    <figure class="overflow-hidden rounded-xl shadow-lg">
      <Image
        src={image.src}
        alt={image.alt}
        format="webp"
        class="w-full h-auto object-cover transition-transform duration-300 hover:scale-105"
        loading="lazy"
      />
      {image.caption && (
        <figcaption class="mt-2 text-center text-sm text-gray-600 italic py-2">
          {image.caption}
        </figcaption>
      )}
    </figure>
  ))}
</div>